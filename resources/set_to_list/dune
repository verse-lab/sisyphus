(library (name set_to_list)
  (modules common)
)

(coq.theory
 (name ProofsSetToList)
 (modules
   Common_ml
   Verify_set_to_list_utils
   set_to_list_old_ml Verify_set_to_list_old
   set_to_list_new_ml Verify_set_to_list_new)
 (libraries sisyphus.plugin)
)


(rule
 (targets Common_ml.v common.cmj)
 (deps common.ml)
 (action (run cfmlc -o ./Common_ml.v common.ml)))

(rule
 (target set_to_list_old.sisyphus.ml)
 (deps set_to_list_old.ml)
 (action (with-stdout-to set_to_list_old.sisyphus.ml
          (run sed -E "s/\\[@.*\\]//" set_to_list_old.ml))))

(rule
 (target set_to_list_old_ml.v)
 (deps set_to_list_old.sisyphus.ml common.ml common.cmj)
 (action (run cfmlc -o ./set_to_list_old_ml.v set_to_list_old.sisyphus.ml)))

(rule
 (target set_to_list_new.sisyphus.ml)
 (deps set_to_list_new.ml)
 (action (with-stdout-to set_to_list_new.sisyphus.ml
          (run sed -E "s/\\[@.*\\]//" ./set_to_list_new.ml))))

(rule
 (target set_to_list_new_ml.v)
 (deps set_to_list_new.sisyphus.ml common.ml common.cmj Common_ml.v)
 (action (run cfmlc -o ./set_to_list_new_ml.v set_to_list_new.sisyphus.ml)))

(env
  (dev
    (flags (:standard -w -32))))
